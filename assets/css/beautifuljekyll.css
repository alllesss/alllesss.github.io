---
layout: null
---

:root {
  --font-body: 'Inter', 'Open Sans', 'Helvetica Neue', Helvetica, Arial, sans-serif;
  --font-body-var: 'InterVariable', sans-serif;
  --font-ui: 'Barlow', 'Open Sans', 'Helvetica Neue', Helvetica, Arial, sans-serif;
  --font-farsi: 'FarsiFont', sans-serif;
  --image-radius: 0.5rem; /* controls image corner rounding */
  font-feature-settings: 'liga' 1, 'calt' 1; /* fix for Chrome */
  font-family: var(--font-body);
}
@supports (font-variation-settings: normal) {
  :root { font-family: var(--font-body-var); }
}

html {
  scroll-behavior: smooth; /* smooth jump for TOC/sidebar links */
}

@font-face {
  font-family: 'FarsiFont';
  src: url('/assets/fonts/Karim.ttf') format('truetype');
  /* font-weight: 400; */
  font-style: normal;
  font-display: swap;
}

.farsi {
  font-family: var(--font-farsi);
  font-size: 1.5em;
}


.sidebar {
  font-size: 1em;
  color: #B7B5AC; /* Adjust as needed */
  margin: 0 auto;
}

.sidebar a {
  color: #B7B5AC; /* Adjust as needed */
}

.blog-post {
  margin: 0 auto;
  width: 100%;
  flex: 1;
  max-width: 850px;
}

.blog-post.full-width {
  width: 100%;
}

/* Post container with grid layout for asymmetric gaps */
.post-container {
  display: grid;
  grid-template-columns: 10.4vw 2.1vw minmax(0, 1fr) 1.04vw 10.4vw;
  align-items: start;
  width: 100%;
}

.post-container .sidebar { grid-column: 1; }
.post-container .blog-post { grid-column: 3; }
.sidebar-spacer { grid-column: 5; }


/* Center figure elements */
figure.img-figure {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  margin: 1.25rem auto;
}

figure.img-figure img {
  display: block;
  margin: 0 auto;
}

figure.img-figure figcaption {
  text-align: center;
}

/* Responsive video embeds */
.video-embed {
  position: relative;
  width: 100%;
  padding-top: 56.25%; /* 16:9 */
  border-radius: var(--image-radius, 0.5rem);
  overflow: hidden;
}
.video-embed iframe {
  position: absolute;
  inset: 0;
  width: 100%;
  height: 100%;
  border: 0;
  border-radius: var(--image-radius, 0.5rem);
}

/* Rounded corners for inline Vimeo/YouTube embeds */
div[style*="padding:"] iframe {
  border-radius: var(--image-radius, 0.5rem);
}

/* Global film grain overlay + spotlight mask */
:root {
  --mx: 50vw;
  --my: 50vh;
  --grain-opacity: 0.1; /* default subtle grain */
  --spot-opacity: 0.18; /* base */
  --spot-size: clamp(180px, 12vw, 230px);
}

/* Theme variable overrides */
body:not(.page-dark-mode) {
  --grain-opacity: 0.25;
  --spot-opacity: 0.11; /* stronger shadow in light mode */
}
body.page-dark-mode {
  --grain-opacity: 0.35;
  --spot-opacity: 0.015;
}

/* Full-page noise overlay */
body::before {
  content: "";
  position: fixed;
  inset: 0;
  z-index: 9999;
  pointer-events: none;
  background-image: url("/assets/images/noise.png"); /* small seamless tile */
  background-repeat: repeat;
  background-size: 320px 320px; /* tune grain scale */
  background-attachment: fixed;
  opacity: var(--grain-opacity);
  mix-blend-mode: soft-light;
  transform: translateZ(0); /* nudge onto GPU */
}

/* Adjust base grain blend per theme */
body:not(.page-dark-mode)::before { mix-blend-mode: multiply; }
body.page-dark-mode::before { mix-blend-mode: soft-light; }

/* Spotlight overlay on hovered targets (cards/posts) */
.spotlight-target {
  position: relative;
}

@media (hover: hover) and (pointer: fine) {
  .spotlight-target.is-spotlight::after {
    content: "";
    position: absolute;
    inset: 0;
    z-index: 1;
    pointer-events: none;
    /* Default (dark-mode friendly) sheen + grain */
    background-image:
      radial-gradient(
        circle at var(--mx) var(--my),
        rgba(230, 228, 217, 0.18) 0%,
        rgba(230, 228, 217, 0.15) 12%,
        rgba(230, 228, 217, 0.12) 22%,
        rgba(230, 228, 217, 0.09) 32%,
        rgba(230, 228, 217, 0.06) 42%,
        rgba(230, 228, 217, 0.04) 52%,
        rgba(230, 228, 217, 0.02) 62%,
        rgba(230, 228, 217, 0.01) 72%,
        rgba(230, 228, 217, 0.005) 82%,
        rgba(230, 228, 217, 0.00) 95%
      ),
      url("/assets/images/noise.png");
    background-repeat: no-repeat, repeat;
    background-size: auto, 320px 320px;
    background-blend-mode: multiply, normal;
    opacity: var(--spot-opacity);
    mix-blend-mode: multiply;
    filter: contrast(0.8) brightness(0.50);

    /* Textured spotlight edge: combine radial mask with noise mask */
    -webkit-mask-image: radial-gradient(
        circle var(--spot-size) at var(--mx) var(--my)),
        rgba(0, 0, 0, 1) 0%,
        rgba(0, 0, 0, 0) 70%
      ),
      url("/assets/images/noise.png");
    -webkit-mask-size: auto, 320px 320px;
    -webkit-mask-repeat: no-repeat, repeat;
    /* For spec-compliant browsers */
    mask-image: radial-gradient(
        circle var(--spot-size) at var(--mx) var(--my),
        rgba(0, 0, 0, 1) 0%,
        rgba(0, 0, 0, 0) 70%
      ),
      url("/assets/images/noise.png");
    mask-size: auto, 320px 320px;
    mask-repeat: no-repeat, repeat;
    /* Attempt to intersect masks where supported */
    -webkit-mask-composite: source-in;
    mask-composite: intersect;

    transition: opacity 180ms ease, filter 180ms ease;
    will-change: opacity, mask-image, filter;
  }
}

/* Light-mode: invert to shadow (darker) with noisy edge */
body:not(.page-dark-mode) .spotlight-target.is-spotlight::after {
  background-image:
    radial-gradient(
      circle at var(--mx) var(--my),
      rgba(0, 0, 0, 0.35) 0%,
      rgba(0, 0, 0, 0.20) 35%,
      rgba(0, 0, 0, 0.00) 70%
    ),
    url("/assets/images/noise.png");
  background-repeat: no-repeat, repeat;
  background-size: auto, 320px 320px;
  background-blend-mode: multiply, normal;
  mix-blend-mode: multiply;
  filter: contrast(1.20) brightness(0.85);
  opacity: var(--spot-opacity);
}

/* Blog post pages: add vertical fade to spotlight */
@media (hover: hover) and (pointer: fine) {
  main.spotlight-target.is-spotlight::after {
    -webkit-mask-image: radial-gradient(
        circle var(--spot-size) at var(--mx) var(--my)),
        rgba(0, 0, 0, 1) 0%,
        rgba(0, 0, 0, 0) 70%
      ),
      url("/assets/images/noise.png"),
      linear-gradient(
        to bottom,
        rgba(0, 0, 0, 0) 0%,
        rgba(0, 0, 0, 0.3) 3%,
        rgba(0, 0, 0, 0.6) 6%,
        rgba(0, 0, 0, 0.85) 9%,
        rgba(0, 0, 0, 1) 12%,
        rgba(0, 0, 0, 1) 88%,
        rgba(0, 0, 0, 0.85) 91%,
        rgba(0, 0, 0, 0.6) 94%,
        rgba(0, 0, 0, 0.3) 97%,
        rgba(0, 0, 0, 0) 100%
      );
    -webkit-mask-size: auto, 320px 320px, 100% 100%;
    -webkit-mask-repeat: no-repeat, repeat, no-repeat;
    mask-image: radial-gradient(
        circle var(--spot-size) at var(--mx) var(--my),
        rgba(0, 0, 0, 1) 0%,
        rgba(0, 0, 0, 0) 70%
      ),
      url("/assets/images/noise.png"),
      linear-gradient(
        to bottom,
        rgba(0, 0, 0, 0) 0%,
        rgba(0, 0, 0, 0.3) 3%,
        rgba(0, 0, 0, 0.6) 6%,
        rgba(0, 0, 0, 0.85) 9%,
        rgba(0, 0, 0, 1) 12%,
        rgba(0, 0, 0, 1) 88%,
        rgba(0, 0, 0, 0.85) 91%,
        rgba(0, 0, 0, 0.6) 94%,
        rgba(0, 0, 0, 0.3) 97%,
        rgba(0, 0, 0, 0) 100%
      );
    mask-size: auto, 320px 320px, 100% 100%;
    mask-repeat: no-repeat, repeat, no-repeat;
  }
}

/* Theme-specific spotlight blend for better visibility */
body.page-dark-mode .spotlight-target.is-spotlight::after { mix-blend-mode: screen; }

/* Exclude images from spotlight effect */
.spotlight-target img {
  position: relative;
  z-index: 3;
  isolation: isolate;
}

/* Slight bump on hover for targets */
@media (hover: hover) and (pointer: fine) {
  .spotlight-target:hover::after {
    opacity: calc(var(--spot-opacity) + 0.05);
  }
}

/* Fallback for browsers without mask-image support: hard-edge spotlight */
@supports not (mask-image: radial-gradient(circle 10px at 10px 10px, #000 0%, transparent 70%)) {
  @media (hover: hover) and (pointer: fine) {
    .spotlight-target.is-spotlight::after {
      -webkit-mask-image: none;
      mask-image: none;
      clip-path: circle(var(--spot-size) at var(--mx) var(--my));
    }
  }
}

/* Respect reduced motion */
@media (prefers-reduced-motion: reduce) {
  body::before {
    transition: none;
  }
}

@media screen and (max-width: 768px) {
  .post-container {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
  }

  .post-container .sidebar { order: 1; }
  .post-container .blog-post { order: 2; }
}

/* Figure captions */
figure figcaption,
.figcaption,
.caption {
  display: block;
  font-style: italic;
  color: inherit;   /* follows light/dark text color */
  opacity: 0.7;
  font-size: 0.95rem;
  text-align: center;
  margin-top: 0.4rem;
}
/* Optional: slightly stronger in dark mode */
.page-dark-mode figure figcaption,
.page-dark-mode .figcaption,
.page-dark-mode .caption {
  opacity: 0.75;
}

/* --- General --- */
.pagination.blog-pager {
  max-width: 50%; /* Adjust this value to suit your needs */
  margin-left: auto;
  margin-right: auto;
}

html {
  font-size: 16px; /* 1rem = 16px */
  background-color: {{ site.page-col | default: "#FFFCF0" }};
  background-attachment: fixed;
}

body {
  font-family: var(--font-body);
  font-size: 1.125rem;
  color: {{ site.text-col | default: "#FFFFFF" }};
  position: relative;
  background-color: {{ site.page-col | default: "#FFFCF0" }};
  background-attachment: fixed;
  {% if site.page-img %}
  background-image: url({{ site.page-img | relative_url }});
  background-attachment: fixed;
  {% endif %}
  overflow-wrap: break-word;
  min-height: 100vh;
  display: flex;
  flex-direction: column;
}
body > main {
  flex: 1;
}
p {
  line-height: 1.45;
  margin: 1.2rem 0;
}
h1,h2,h3,h4,h5,h6 {
  font-family: var(--font-ui);
  font-weight: 600;
  line-height: 1.1;
}
h1 {
  font-size: 1.6rem;
  color: #D14D41;
}
h2 {
  font-size: 1.4rem;
  color: #DA702C;
}

h3 {
  font-size: 1.2rem;
}
.blog-post h3 {
  font-size: 1.2rem;
  color: #DA702C;
}
h4 {
  font-size: 1.1rem;
}
h1, h2, h3, h4 {
  margin-top: 1.3rem;
/*  margin-bottom: -0.5rem*/
}
.big-img h1,
.big-img h2 {
  color: #FFFCF0;
}
a {
  color: {{ site.link-col | default: "#4385BE" }};
}
a:hover,
a:focus {
  color: {{ site.hover-col | default: "#DA702C" }};
}
blockquote {
  color: #808080;
  font-style: italic;
}
blockquote p:first-child {
  margin-top: 0;
}
hr.small {
  max-width: 6.25rem;
  margin: 1rem auto;
  border-width: 0.125rem;
  border-color: inherit;
  border-radius: 0.1875rem;
}

/* Mobile font sizes */
@media (max-width: 767px) {
  body {
    font-size: 0.9rem;
  }
  h1 {
    font-size: 1.25rem;
  }
  h2 {
    font-size: 1.1rem;
  }
  h3 {
    font-size: 0.95rem;
  }
  .blog-post h3 {
    font-size: 0.95rem;
  }
  h4 {
    font-size: 0.9rem;
  }
  .sidebar ul {
    font-size: 0.8em;
  }

  /* Keep home/post header legible on mobile */
  .intro-header .page-heading h1,
  .intro-header .post-heading h1 {
    font-size: 1.6rem;
  }
  .intro-header .page-heading .page-subheading,
  .intro-header .post-heading .post-subheading {
    font-size: 1.0rem;
    margin: 0.35rem 0 0.6rem;
  }
  .intro-header .page-heading hr.small {
    margin: 0.35rem auto 0.85rem;
  }
}

/* fix in-page anchors to not be behind fixed header */
:target:before {
  content: "";
  display: block;
  height: 3.125rem; /* navbar height */
  margin: -3.125rem 0 0;
}

.hideme {
  display: none;
}

::-moz-selection {
  color: #fff;
  text-shadow: none;
  background-color: {{ site.hover-col | default: "#0085A1" }};
}
::selection {
  color: #fff;
  text-shadow: none;
  background-color: {{ site.hover-col | default: "#0085A1" }};
}
img::selection {
  color: #fff;
  background: transparent;
}
img::-moz-selection {
  color: #fff;
  background: transparent;
}

img {
  max-width: 100%;
}

.linked-section {
  padding-top: 3.75rem;
  margin-top: -1.5625rem;
}

/* Comments */

.disqus-comments {
  margin-top: 1.875rem;
}

@media (min-width: 768px) {
  .disqus-comments {
    margin-top: 2.5rem;
  }
}

/* --- Navbar --- */

.navbar-custom {
  background-color: {{ site.navbar-col | default: "#EAEAEA" }};
  border-bottom: 1px solid {{ site.navbar-border-col | default: "#DDDDDD" }};
  font-family: var(--font-ui);
  {% if site.navbar-img %}
    background-image: url({{ site.navbar-img | relative_url }});
    background-attachment: fixed;
  {% endif %}
  -webkit-transition: padding .5s ease-in-out;
  -moz-transition: padding .5s ease-in-out;
  transition: padding .5s ease-in-out;
}

.navbar-custom,
.navbar-custom.top-nav-short,
.navbar-custom.top-nav-short-permanent {
  padding-top: 0;
  padding-bottom: 0;
}

.navbar-custom .navbar-brand {
  line-height: 1.5;
  padding-top: 0.625rem;
  padding-bottom: 0.625rem;
  font-size: 1rem;
}

.navbar-custom .navbar-brand-logo {
  -webkit-transition: padding .5s ease-in-out;
  -moz-transition: padding .5s ease-in-out;
  transition: padding .5s ease-in-out;
}

.navbar-custom .navbar-brand-logo,
.navbar-custom.top-nav-short .navbar-brand-logo,
.navbar-custom.top-nav-short-permanent .navbar-brand-logo {
  padding-top: 0.3125rem;
  padding-bottom: 0.3125rem;
}

.navbar-custom .navbar-brand-logo img {
  -webkit-transition: height .5s ease-in-out;
  -moz-transition: height .5s ease-in-out;
  transition: height .5s ease-in-out;
}

.navbar-custom .navbar-brand-logo img,
.navbar-custom.top-nav-short .navbar-brand-logo img,
.navbar-custom.top-nav-short-permanent .navbar-brand-logo img {
  height: 2.5rem;
}

.navbar-custom .navbar-nav .nav-item {
/*  text-transform: uppercase;*/
  font-size: 1rem;
/*  letter-spacing: 0.0625rem;*/
}

.navbar-custom .navbar-nav .nav-link {
  line-height: 1.5rem;
  padding-top: 0.9375rem;
  padding-bottom: 0.9375rem;
}

.navbar-custom .navbar-brand,
.navbar-custom .navbar-nav .nav-link {
  font-weight: 500;
  color: {{ site.navbar-text-col | default: "#404040" }};
}

.navbar-toggler {
  font-size: 1rem;
  margin: 0.5rem 0;
}
.navbar-custom .navbar-toggler:focus,
.navbar-custom .navbar-toggler:hover {
  background-color: initial;
}

.navbar-custom .navbar-toggler[aria-expanded="true"] {
  background-color: rgba(0, 0, 0, 0.2);
}

.dropdown-toggle::after {
  border-width: 0.4em;
}

@media (min-width: 1200px) {
  .navbar-custom {
    padding-top: 1.25rem;
    padding-bottom: 1.25rem;
  }

  .navbar-custom .navbar-brand-logo {
    padding-top: 0;
    padding-bottom: 0;
  }

  .navbar-custom .navbar-brand-logo img {
    height: 3.125rem;
  }

  .navbar-expand-xl .navbar-nav .nav-link {
    padding-left: 0.9375rem;
    padding-right: 0.9375rem;
  }

  .navbar-expand-xl .navbar-nav .nav-item:not(.dropdown):last-child .nav-link {
    padding-right: 0;
  }
}

@media (min-width: 1200px) {
  .navbar-custom .nav-item.dropdown:hover {
    background: rgba(0, 0, 0, 0.1);
  }
}

.navbar-custom .nav-item.dropdown.show {
  background: rgba(0, 0, 0, 0.2);
}

.navbar-custom .nav-item.dropdown .dropdown-menu {
  margin-top: 0;
  font-size: 1em;
  border: 0;
  padding: 0;
  {% if site.navbar-var-length %}
  min-width: 100%;
  {% else %}
  min-width: 0;
  width: 100%;
  word-break: break-word;
  {% endif %}
}

.navbar-custom .nav-item.dropdown .dropdown-menu .dropdown-item {
  padding: 0.625rem;
  background-color: {{ site.navbar-col | default: "#EAEAEA" }};
  text-decoration: none !important;
  font-weight: normal;
  color: {{ site.navbar-text-col | default: "#404040" }};
  {% unless site.navbar-var-length %}
  white-space: normal;
  {% endunless %}
}

@media (min-width: 1200px) {
  .navbar-custom .nav-item.dropdown .dropdown-menu {
    text-align: center;
  }

  .navbar-custom .nav-item.dropdown .dropdown-menu .dropdown-item {
    padding-left: 0.625rem;
    border: 1px solid {{ site.navbar-border-col | default: "#DDDDDD" }};
    border-width: 0 1px 1px;
  }

  .navbar-custom .nav-item.dropdown .dropdown-menu .dropdown-item:first-child {
    border-top-width: 1px;
  }
}

@media (max-width: 1199px) {
  .navbar-custom .navbar-collapse {
    border-top: 1px solid {{ site.navbar-border-col | default: "#DDDDDD" }};
    margin: 0 -1rem;
  }

  .navbar-custom .navbar-nav {
    padding: 0.5rem 0;
  }

  .navbar-custom .navbar-nav .nav-link {
    padding: 0.675rem 0 0.675rem 1rem;
  }

  .navbar-custom .nav-item.dropdown.show {
    background: rgba(0, 0, 0, 0.2);
  }

  .navbar-custom .nav-item.dropdown .dropdown-menu .dropdown-item {
    padding-left: 2rem;
  }
}
.navbar-custom .navbar-brand:hover,
.navbar-custom .navbar-brand:focus ,
.navbar-custom .navbar-nav .nav-link:hover,
.navbar-custom .navbar-nav .nav-link:focus,
.navbar-custom .navbar-nav .dropdown-menu .dropdown-item:hover,
.navbar-custom .navbar-nav .dropdown-menu .dropdown-item:focus {
  color: {{ site.hover-col | default: "#0085A1" }};
}

.navbar-custom .avatar-container {
  position: absolute;
  left: 50%;
  width: 3.125rem;
  bottom: -1.5rem;
  transition: opacity 0.5s ease-in-out;
  -webkit-transition: opacity 0.5s ease-in-out;
  -moz-transition: opacity 0.5s ease-in-out;
}
.navbar-custom.top-nav-short .avatar-container {
  opacity: 0;
  visibility: hidden;
  transition: visibility linear 0.5s, opacity 0.5s ease-in-out;
  -webkit-transition: visibility linear 0.5s, opacity 0.5s ease-in-out;
  -moz-transition: visibility linear 0.5s, opacity 0.5s ease-in-out;
}

.navbar-custom .avatar-container .avatar-img-border {
  width: 100%;
  margin-left: -50%;
  {% unless site.round-avatar == false %}
    border-radius: 50%;
    box-shadow: 0 0 0.5rem rgba(0, 0, 0, .8);
    -webkit-box-shadow: 0 0 0.3125rem rgba(0, 0, 0, .8);
    -moz-box-shadow: 0 0 0.5rem rgba(0, 0, 0, .8);
  {% endunless %}
}
.navbar-custom .avatar-container .avatar-img {
  width: 100%;
  {% unless site.round-avatar == false %}
    border-radius: 50%;
  {% endunless %}
  display: block;
}

.navbar-custom.top-nav-expanded .avatar-container {
  display: none;
}

@media (min-width: 1200px) {
  .navbar-custom.top-nav-regular .avatar-container {
    width: 6.25rem;
    bottom: -1.9375rem;
  }

  .navbar-custom.top-nav-regular .avatar-container .avatar-img-border {
    width: 100%;
    {% unless site.round-avatar == false %}
    box-shadow: 1px 1px 2px rgba(0, 0, 0, .8);
    -webkit-box-shadow: 1px 1px 2px rgba(0, 0, 0, .8);
    -moz-box-shadow: 1px 1px 2px rgba(0, 0, 0, .8);
    {% endunless %}
  }

  .navbar-custom.top-nav-regular .avatar-container .avatar-img {
    width: 100%;
  }
}

/* --- Footer --- */

footer {
  padding: 1.875rem 0;
  border-top: 1px #EAEAEA solid;
  margin-top: 3.125rem;
  font-size: 0.875rem;
  background-color: {{ site.footer-col | default: "#EAEAEA" }};
  {% if site.footer-img %}
    background-image: url({{ site.footer-img | relative_url }});
    background-attachment: fixed;
  {% endif %}
}

footer p.text-muted {
  color: {{ site.footer-text-col | default: "#777777" }} !important;
}

footer a {
  color: {{ site.footer-link-col | default: "#404040" }};
}

footer a:hover,
footer a:focus {
  color: {{ site.footer-hover-col | default: "#0085A1" }};
}

footer .list-inline {
  margin: 0;
  padding: 0;
  margin-bottom: 1.875rem;
}
footer .copyright {
  font-family: var(--font-ui);
  text-align: center;
  margin-bottom: 0;
  margin-top: 0;
}
footer .theme-by {
  text-align: center;
  margin: 0.625rem 0 0;
}
footer .footer-custom-content {
  text-align: center;
  margin-bottom: 0.9375rem;
  font-family: var(--font-ui);
}

@media (min-width: 768px) {
  footer {
    padding: 3.125rem 0;
  }
  footer .footer-links {
    font-size: 1rem;
  }
  footer .copyright {
    font-size: 1rem;
  }
  footer .footer-custom-content {
    font-size: 1rem;
  }
}

/* --- Post preview (feed) --- */

.posts-list {
    margin: 0;
}

.post-preview {
  padding: 1.25rem;
  margin-bottom: 1.25rem;
  border: 1px solid #CECDC3;
  background-color: #F2F0E5;
  border-radius: var(--image-radius, 0.5rem);
  box-shadow: 2px 2px 4px rgba(16, 15, 15, 0.08);
  overflow: hidden;
  transition: box-shadow 0.15s ease, background-color 0.15s ease;
  cursor: pointer;
}

@media (min-width: 768px) {
  .post-preview {
    padding: 2rem;
  }
}

.post-preview:hover {
  box-shadow: 2px 2px 6px rgba(16, 15, 15, 0.16);
  background-color: #fffcf042;
}

.post-preview a {
  text-decoration: none;
  font-family: var(--font-ui);
  color: {{ site.text-col | default: "#404040" }};
  transition: color 0.2s ease;
  cursor: pointer;
}

.post-preview a:focus,
.post-preview a:hover {
  text-decoration: none;
  color: {{ site.hover-col | default: "#0085A1" }};
}

  /* Hover effect for entire post preview */
  .post-preview:hover .post-title,
  .post-preview:hover .post-subtitle,
  .post-preview:hover .post-meta,
  .post-preview:hover .post-meta a,
  .post-preview:hover .post-author,
  .post-preview:hover .post-author a,
  .post-preview:hover .post-author strong {
    color: #D14D41;
  }

.post-preview .post-title {
  font-size: 1.2rem;
  margin-top: 0;
    transition: color 0.2s ease;
}
.post-preview .post-subtitle {
  margin: 0;
  font-weight: 300;
  margin-bottom: 0.625rem;
    transition: color 0.2s ease;
}
.post-preview .post-meta,
.post-heading .post-meta {
  color: #6F6E69;
  font-size: 1rem;
  font-style: italic;
  margin: 0 0 0.625rem;
  font-family: var(--font-ui);
  transition: color 0.2s ease;
}

.post-preview .post-author {
  display: inline-block;
  margin-bottom: 0.25rem;
  color: #6F6E69;
  font-family: var(--font-ui);
  font-size: 1rem;
  transition: color 0.2s ease;
}

.post-preview .post-preview-link {
  display: block;
  text-decoration: none;
  color: inherit;
  cursor: pointer;
  width: 100%;
  height: 100%;
}

.post-preview .post-preview-link:hover {
  text-decoration: none;
}

.post-preview .post-preview-link article {
  height: 100%;
  display: flex;
  flex-direction: column;
}

.post-card-container {
  display: grid;
  grid-template-columns: 1fr auto;
  gap: 2rem;
  align-items: start;
  flex-grow: 1;
}

.post-card-left {
  display: flex;
  flex-direction: column;
  justify-content: space-between;
  min-height: 100%;
}

.post-card-right {
  display: flex;
  align-items: flex-start;
}

.post-card-thumbnail {
  width: 180px;
  height: 180px;
  object-fit: cover;
  border-radius: 4px;
}

.post-card-footer {
  margin-top: auto;
  padding-top: 1rem;
}

.post-preview .post-preview-link article {
  height: 100%;
  display: flex;
  flex-direction: column;
}

.post-preview .post-preview-link .post-read-more {
  cursor: pointer;
}

.post-preview .post-preview-link a {
  color: #0085A1;
  text-decoration: underline;
}

.post-preview .post-author a,
.post-preview .post-author strong {
  color: inherit;
  transition: color 0.2s ease;
}
.post-heading .post-meta {
  display: inline-block;
}
@media (max-width: 767px) {
  .post-heading .post-meta {
    display: block;
    margin-bottom: 0;
  }
}
.post-heading .post-meta .middot {
  margin: 0 0.625rem;
}
.post-preview .post-entry {
  width: 100%;
}

/* Wider container for posts on desktop */
@media (min-width: 768px) {
  .posts-list {
    max-width: 1000px;
    margin: 0 auto;
  }
}

.post-preview .post-image {
  float: right;
  margin-left: 0.625rem;
  height: 12rem;
  width: 12rem;
  padding: 5px;
}
.post-preview .post-image {
  filter: grayscale(40%);
}
.post-preview .post-image:hover {
  filter: grayscale(0%);
}
.post-preview .post-image img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  border-radius: var(--image-radius, 0.5rem);
  box-shadow: 2px 2px 5px rgba(40, 39, 38, 0.18);
  transition: none;
}
.post-preview .post-image-short {
  margin-top: -1rem;
}
@media (max-width: 500px) {
  .post-preview .post-image {
    height: 8rem;
    width: 8rem;
  }
  .post-preview .post-image-short {
    margin-top: 0;
  }
}
.post-preview .post-image-small {
  width: 100%;
  height: 100%;
  text-align: center;
  display: none;
}
.post-preview .post-image-small img {
  max-width: 6.25rem;
  max-height: 6.25rem;
  aspect-ratio: 1 / 1;
  border-radius: var(--image-radius, 0.5rem);
  box-shadow: 2px 2px 5px rgba(40, 39, 38, 0.18);
  transition: none;
}
@media (max-width: 500px) {
  .post-preview .post-image {
    display: none;
  }
  .post-preview .post-image-small {
    display: block;
  }
}

.post-preview .post-read-more {
  font-weight: 700;
}

@media (min-width: 768px) {
  .post-preview .post-title {
    font-size: 1.8rem;
  }
}

/* --- Tags --- */

.blog-tags {
  font-family: var(--font-ui);
  font-size: 0.9375rem;
  margin: 1.875rem 0;
}

.blog-tags span {
  color: {{ site.text-col | default: "#404040" }};
  opacity: 0.8;
}

.blog-tags .list-inline-item {
  margin-right: 0;
}

.blog-tags a {
  color: {{ site.text-col | default: "#404040" }};
  text-decoration: none;
  padding: 0 0.3125rem;
  opacity: 0.8;
  border: 1px solid transparent;
  border-radius: 0.1875rem;
}

.blog-tags a:hover {
  opacity: 1;
  color: {{ site.text-col | default: "#404040" }};
  border-color: {{ site.text-col | default: "#404040" }};
}

.post-preview .blog-tags {
  margin-top: 0.3125rem;
  margin-bottom: 0;
}

@media (min-width: 768px) {
  .post-preview .blog-tags {
    margin-top: 0.625rem;
  }
}

/* Tags page */

.tag-btn {
  margin: 0.3125rem;
}

#full-tags-list {
  font-family: var(--font-ui);
}

#full-tags-list .tag-entry {
  margin: 0 0 0.9375rem 1.5625rem;
}

#full-tags-list .tag-entry a {
  font-size: 1.25rem;
}

#full-tags-list .tag-entry .entry-date {
  color: #808080;
  font-style: italic;
  font-size: 1rem;
}

/* --- Post and page headers --- */

.intro-header {
  margin: 5rem 0 1.25rem;
  position: relative;
}
.intro-header.big-img {
  background: no-repeat center center;
  -webkit-background-size: cover;
  -moz-background-size: cover;
  background-size: cover;
  -o-background-size: cover;
  margin-top: 3.1875rem; /* The small navbar is 50px tall + 1px border */
  margin-bottom: 2.1875rem;
}
nav.top-nav-short-permanent ~ header > .intro-header {
  margin-top: 5rem;
}
nav.top-nav-short-permanent ~ header > .intro-header.big-img {
  margin-top: 3.1875rem;
}
.intro-header.big-img .big-img-transition {
  position: absolute;
  width: 100%;
  height: 100%;
  opacity: 0;
  background: no-repeat center center;
  -webkit-background-size: cover;
  -moz-background-size: cover;
  background-size: cover;
  -o-background-size: cover;
  -webkit-transition: opacity 1s linear;
  -moz-transition: opacity 1s linear;
  transition: opacity 1s linear;
}
.intro-header .page-heading {
  text-align: center;
}
.intro-header.big-img .page-heading,
.intro-header.big-img .post-heading {
  padding: 6.25rem 0;
  color: #FFF;
  text-shadow: 1px 1px 3px #000;
}
.intro-header .page-heading h1 {
  margin-top: 1rem;
  font-size: 1.4rem;
}
.intro-header .post-heading h1 {
  margin-top: 0;
  font-size: 1rem;
}
.intro-header .page-heading .page-subheading,
.intro-header .post-heading .post-subheading {
  font-size: 1.05rem;
  line-height: 1.1;
  display: block;
  font-family: var(--font-ui);
  font-weight: 300;
  margin: 0.35rem 0 0.4rem;
}
.intro-header .page-heading hr.small,
.intro-header .post-heading hr.small {
  margin: 0.9rem auto 1.1rem;
}
.intro-header .post-heading .post-subheading {
  margin-bottom: 1.25rem;
}
.intro-header.big-img .page-heading .page-subheading,
.intro-header.big-img .post-heading .post-subheading {
  font-weight: 400;
}
.intro-header.big-img .page-heading hr {
  box-shadow: 1px 1px 3px #000;
  -webkit-box-shadow: 1px 1px 3px #000;
  -moz-box-shadow: 1px 1px 3px #000;
}
.intro-header.big-img .post-heading .post-meta {
  color: #EEE;
}
.intro-header.big-img .img-desc {
  background: rgba(30, 30, 30, 0.6);
  position: absolute;
  padding: 0.3125rem 0.625rem;
  font-size: 1rem;
  color: #EEE;
  font-family: var(--font-ui);
  .intro-header .page-heading hr.small,
  .intro-header .post-heading hr.small {
    margin: 0.9rem auto 1.1rem;
  }
}
@media (min-width: 1200px) {
  .intro-header {
    margin-top: 10rem;
  }
  .intro-header.big-img {
    margin-top: 5.6875rem; /* Full navbar is small navbar + 20px padding on each side when expanded */
  }
  .intro-header.big-img .page-heading,
  .intro-header.big-img .post-heading {
    padding: 9.375rem 0;
  }
  .intro-header .page-heading h1 {
    font-size: 3rem;
  }
  .intro-header .post-heading h1 {
    font-size: 2rem;
  }
  .intro-header.big-img .img-desc {
    font-size: 0.875rem;
  }
}

#header-gh-btns {
  margin-bottom: 0.9375rem;
}
@media (max-width: 500px) {
  #header-gh-btns > iframe {
    display: block;
    margin-bottom: 0.3125rem;
  }
}

/* --- Pagination --- */

.pagination {
  margin: 0.625rem 0 0;
  justify-content: space-between;
}

.pagination.blog-pager {
  margin-top: 0;
}

.pagination .page-item.next {
  margin-left: auto;
}

@media (min-width: 768px) {
  .pagination.blog-pager {
    margin-top: 0.625rem;
  }
}

.pagination .page-item .page-link {
  font-family: var(--font-ui);
/*  text-transform: uppercase;*/
  font-size: 1rem;
  font-weight: 600;
  letter-spacing: 1px;
  padding: 0.625rem 0.3125rem;
  background-color: #E6E4D9;
  border-radius: 0.5rem;
  color: {{ site.text-col | default: "#404040" }};
  padding: 0.75rem 1rem;
  position: relative;
}}
@media (min-width: 768px) {
  .pagination .page-item .page-link {
    padding: 0.9375rem 1.5625rem;
  }
}
.pagination .page-item .page-link:hover,
.pagination .page-item .page-link:focus {
  color: #E6E4D9;
  border: 1px solid {{ site.hover-col | default: "#0085A1" }};
  background-color: {{ site.hover-col | default: "#0085A1" }};
}

/* Spotlight effect on pagination buttons */
@media (hover: hover) and (pointer: fine) {
  .pagination .spotlight-target.is-spotlight::after {
    content: "";
    position: absolute;
    inset: 0;
    z-index: 1;
    pointer-events: none;
    border-radius: 0.5rem;
    background-image:
      radial-gradient(
        circle at var(--mx) var(--my),
        rgba(230, 228, 217, 0.18) 0%,
        rgba(230, 228, 217, 0.15) 12%,
        rgba(230, 228, 217, 0.12) 22%,
        rgba(230, 228, 217, 0.09) 32%,
        rgba(230, 228, 217, 0.06) 42%,
        rgba(230, 228, 217, 0.04) 52%,
        rgba(230, 228, 217, 0.02) 62%,
        rgba(230, 228, 217, 0.01) 72%,
        rgba(230, 228, 217, 0.005) 82%,
        rgba(230, 228, 217, 0.00) 95%
      ),
      url("/assets/images/noise.png");
    background-repeat: no-repeat, repeat;
    background-size: auto, 320px 320px;
    background-blend-mode: screen, normal;
    opacity: 0.15;
    mix-blend-mode: overlay;
    filter: contrast(1.08) brightness(1.00);
    -webkit-mask-image: radial-gradient(
        circle var(--spot-size) at var(--mx) var(--my),
        rgba(0, 0, 0, 1) 0%,
        rgba(0, 0, 0, 0) 70%
      ),
      url("/assets/images/noise.png");
    -webkit-mask-size: auto, 320px 320px;
    -webkit-mask-repeat: no-repeat, repeat;
    mask-image: radial-gradient(
        circle var(--spot-size) at var(--mx) var(--my),
        rgba(0, 0, 0, 1) 0%,
        rgba(0, 0, 0, 0) 70%
      ),
      url("/assets/images/noise.png");
    mask-size: auto, 320px 320px;
    mask-repeat: no-repeat, repeat;
    transition: opacity 180ms ease, filter 180ms ease;
    will-change: opacity, mask-image, filter;
  }
}

/* --- Tables --- */

table {
  padding: 0;
}
table tr {
  border-top: 1px solid #cccccc;
  background-color: {{ site.page-col | default: "#404040" }};
  margin: 0;
  padding: 0;
}
table tr:nth-child(2n) {
  background-color: {{ site.page-col | default: "#404040" }};
}
table tr th {
  font-weight: bold;
  border: 1px solid #cccccc;
  text-align: left;
  margin: 0;
  padding: 0.375rem 0.8125rem;
}
table tr td {
  border: 1px solid #cccccc;
  text-align: left;
  margin: 0;
  padding: 0.375rem 0.8125rem;
}
table tr th :first-child,
table tr td :first-child {
  margin-top: 0;
}
table tr th :last-child,
table tr td :last-child {
  margin-bottom: 0;
}

/* --- Code blocks --- */

.highlight {
  border-radius: 0.75rem;
  overflow: hidden;
  background-color: #F2F0E5;
  display: block;
}

code {
  padding: 0.125rem 0.25rem;
  color: #D14D41;
  background-color: #F2F0E5;
  border-radius: 0.25rem;
}

pre code {
  padding: 0;
  background-color: transparent;
  border-radius: 0;
}

pre {
  font-size: 1rem;
  line-height: 1.5em;
  border-radius: 0.75rem;
  padding: 1.875rem;
  color: #D14D41;
  background-color: #F2F0E5;
  overflow: hidden;
  margin: 0;
}
.highlight pre {
  border: none;
  background: none;
  margin: 0;
  border-radius: 0;
  overflow: visible;
  padding: 1.875rem;
}
.highlight > pre {
  background-color: transparent;
  background-image: linear-gradient(
    rgba(0,0,0,0.02), rgba(0,0,0,0.02) 1.5em, rgba(0,0,0,0.01) 1.5em, rgba(0,0,0,0.01) 3em);
  background-size: auto 3em;
  background-position-y: 0.625rem;
  border: none;
  border-radius: 0;
  padding: 1.875rem;
  overflow: visible;
  box-sizing: border-box;
}
.highlight > pre:not([class~="highlight"]) { /* code block with line number */
  padding: 0;
}
.highlight table,
.highlight tr,
.highlight td { /* to be removed after fixing table styles */
  border: none;
  background-color: transparent !important;
  padding: 0;
  margin: 0;
}
.highlight pre.lineno {
  color: rgba(0,0,0,0.3);
  border-radius: 0;
  border-right: 2px solid #444;
}

/* Make line numbers unselectable: excludes line numbers from copy-paste user ops */
.lineno {
  -webkit-user-select: none;
     -moz-user-select: none;
      -ms-user-select: none;
          user-select: none;
}
.lineno::selection, .lineno::-moz-selection {
  background: none;
}

/* Fix table border github gist snippets */

.gist, .gist-file table tr {
  border: unset;
}

.gist, .gist-file table tr td {
  border: unset;
}

/* --- Social media sharing section --- */

#social-share-section {
  margin-bottom: 1.875rem;
  margin-top: 1.875rem;
}

/* --- Notification boxes --- */
.box-note,
.box-warning,
.box-error,
.box-success,
.box-yellow,
.box-gray {
  padding: 0.9375rem 0.9375rem 0.9375rem 0.9375rem;
  margin: 1.25rem 1.25rem 1.25rem 0.3125rem;
  color: #100F0F;
/*  border: 1px solid #eee;*/
/*  border-left-width: 0.3125rem;
  border-radius: 0.3125rem 0.1875rem 0.1875rem 0.3125rem;*/
}

.box-note {
  background-color: #3AA99F;
  border-left-color: #3AA99F;
}

.box-warning {
  background-color: #DA702C;
  border-left-color: #DA702C;
}

.box-yellow {
  background-color: #D0A215;
  border-left-color: #D0A215;
}

.box-error {
  background-color: #D14D41;
  border-left-color: #D14D41;
}

.box-success {
  background-color: #879A39;
  border-left-color: #879A39;
}

.box-gray {
  background-color: #B7B5AC;
  border-left-color: #B7B5AC;
}

/* --- Misc blog post styles --- */

.blog-post :first-child {
  margin-top: 0;
}

.blog-post img {
  max-width: 100%;
  border-radius: var(--image-radius);
  box-shadow: 2px 2px 5px rgba(40, 39, 38, 0.18);
  transition: box-shadow 0.15s ease;
}

.blog-post img:hover {
  box-shadow: 2px 2px 3px rgba(40, 39, 38, 0.4);
}

.blog-post .caption {
  text-align: center;
  font-size: 0.875rem;
  padding: 0.625rem;
  font-style: italic;
  color: #6F6E69;
  margin: 0;
  display: block;
  border-bottom-right-radius: 0.3125rem;
  border-bottom-left-radius: 0.3125rem;
}

.blog-post hr {
  max-width: 25%;
  border-width: 0.125rem;
  border-radius: 0.1875rem;
  border-color: #CECDC3;
}

.blog-post blockquote {
  padding: 0.625rem 1.25rem;
  margin: 0 0 1.25rem;
  font-size: 1.1rem;
  border-left: 0.3125rem solid #F2F0E5;
}

.blog-post blockquote p:last-child {
  margin-bottom: 0;
}

.center {
  display: block;
  margin: 0 auto;
}

/* Sidebar styles */
.sidebar {
  position: sticky;
  top: 5.0rem;
  height: min-content;
  max-height: calc(100vh - 6rem);
  overflow-y: auto;
  opacity: 0.35;
  transition: opacity 0.2s ease;
}

.sidebar:hover,
.sidebar:focus-within {
  opacity: 1;
}

  /* Table of Contents styling */
  .sidebar-title {
    padding-left: 0.5rem; /* match first-level list indent */
    margin-bottom: 0.35rem;
    font-weight: 600;
    font-size: 0.85rem;
  }

  .sidebar ul {
    list-style-type: none;
    padding-left: 0.5rem;
    margin: 0;
    font-size: 0.8em; /* Slightly smaller TOC text */
  }

  .sidebar ul ul {
    padding-left: 1rem; /* Reduced from default (usually 2.5rem) */
    margin-top: 0.25rem;
    margin-bottom: 0.25rem;
  }

  .sidebar li {
    margin-bottom: 0.5rem;
    line-height: 1.4;
  }

  .sidebar a {
    text-decoration: none;
    transition: color 0.2s ease;
  }

  .sidebar a:hover {
    color: {{ site.hover-col | default: "#DA702C" }};
    text-decoration: underline;
  }

.full-width .sidebar {
  display: block;
}

@media (max-width: 767px) {
  .sidebar {
    display: none;
  }
}

/* Search bar */
#beautifuljekyll-search-overlay {
  font-family: var(--font-ui);
  display: none;
  z-index: 2000000;
  position: fixed;
  background: rgba(0,0,0,0.9);
  left: 0;
  right: 0;
  top: 0;
  bottom: 0;
  text-align: center;
  padding: 1rem;
  overflow-y: auto;
}

#nav-search-exit {
  position: fixed;
  top: 1.5rem;
  cursor: pointer;
  right: 25%;
  margin-right: 2rem;
  color: #555;
  font-size: 2rem;
  line-height: 2rem;
  font-weight: bold;
  z-index: 2000001;
}
  z-index: 2000001;
}
#nav-search-exit:hover {
  color: #000;
}
#nav-search-input {
  text-align: center;
  background: #FFFCF0;
  margin: auto;
  display: block;
  font-size: 2rem;
  width: 50%;
  transition: width 300ms ease;
  color: #100F0F;
  border-radius: 5rem;
  outline: none;
  border: none;
  padding: 0 3rem;
}

@media (max-width: 1199px) {
  #nav-search-input {
    width: 75%;
  }
  #nav-search-exit {
    right: 12.5%;
  }
}
@media (max-width: 767px) {
  #nav-search-input {
    width: 100%;
  }
  #nav-search-exit {
    right: 0;
  }
}
#nav-search-input:focus {
  background: #f3f8fe;
  box-shadow: 0px 0.15rem 1rem #e7f4ff;
  outline: none;
}

#nav-search-input::placeholder {
  color: #6F6E69;
}

#search-results-container {
  list-style: none;
  padding-left: unset;
  margin-top: 1.5rem;
  color: #FFFCF0;
  font-size: 1.5rem;
  max-height: calc(100vh - 6.5rem);
  overflow-y: auto;
}
#search-results-container a {
  color: #FFFCF0;
  text-decoration: none;
}
#search-results-container a:hover {
  color: #FFFCF0;
  text-decoration: underline;
}

#nav-search-icon {
  display: inline-block;
}
#nav-search-text {
  display: none;
}

@media (max-width: 1199px) {
  #nav-search-icon {
    display: none;
  }
  #nav-search-text {
    display: inline-block;
  }
}

/* PDF viewer embed */
.pdf-viewer {
  border: 1px solid #E6E4D9;
  border-radius: 8px;
  overflow: hidden;
  background: #FFFCF0;
  box-shadow: 2px 2px 6px rgba(16, 15, 15, 0.12);
  margin: 1rem auto;
  max-width: 900px;
  width: 100%;
}
.pdf-viewer iframe {
  display: block;
  width: 100%;
}
.pdf-viewer .pdf-viewer-fallback {
  display: flex;
  gap: 0.5rem;
  align-items: center;
  padding: 0.5rem 0.75rem;
  border-top: 1px solid #E6E4D9;
  background: #FFFCF0;
  font-family: var(--font-ui);
  color: #6F6E69;
}
.pdf-viewer .pdf-viewer-fallback a {
  color: {{ site.hover-col | default: "#0085A1" }};
  text-decoration: underline;
}
.pdf-viewer .pdf-caption {
  padding: 0.5rem 0.75rem 0.75rem;
  background: #FFFCF0;
  border-top: 1px solid #E6E4D9;
  font-family: var(--font-ui);
  color: inherit;
}

/* Dark mode adjustments for PDF viewer */
body.page-dark-mode .pdf-viewer {
  border-color: #2B2A27;
  background: #0F0E0D;
  box-shadow: 0 0 14px rgba(0, 0, 0, 0.45);
}
body.page-dark-mode .pdf-viewer .pdf-viewer-fallback {
  border-top-color: #2B2A27;
  background: #0F0E0D;
  color: #E6E4D9;
}
body.page-dark-mode .pdf-viewer .pdf-viewer-fallback a {
  color: #F4C16E;
}
body.page-dark-mode .pdf-viewer .pdf-caption {
  background: #0F0E0D;
  border-top-color: #2B2A27;
  color: #E6E4D9;
}

/* Newsletter embed styling */
.newsletter-container {
  width: 100%;
  max-width: 540px;
  margin: 2.5rem auto;
  padding: 0 1rem;
  display: flex;
  justify-content: center;
  align-items: center;
}

.newsletter-container.centered {
  display: flex;
  justify-content: center;
  align-items: center;
}

.newsletter-iframe {
  width: 100% !important;
  max-width: 100% !important;
  height: auto !important;
  min-height: 320px;
  border: none !important;
  border-radius: 12px !important;
  display: block;
  background-color: transparent !important;
}

/* Responsive design for mobile */
@media (max-width: 600px) {
  .newsletter-container {
    padding: 0 0.75rem;
  }
  
  .newsletter-iframe {
    min-height: 280px;
  }
}

/* Theme switching for newsletter embeds */
.newsletter-light {
  display: block;
}

.newsletter-dark {
  display: none;
}

body.page-dark-mode .newsletter-light {
  display: none;
}

body.page-dark-mode .newsletter-dark {
  display: block;
}

/* Mobile responsiveness */
@media (max-width: 768px) {
  .newsletter-container {
    max-width: 100%;
    margin: 2rem 0;
  }
}

@media (max-width: 480px) {
  .newsletter-container {
    margin: 1.5rem 0;
  }
}
